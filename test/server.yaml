# QTRP 服务端配置

# 控制连接监听地址
bind_addr: "127.0.0.1:17000"

# Dashboard 监听地址 (留空禁用)
dashboard_addr: ""

# 传输层: net | gnet | quic
# - net: 标准 TCP (默认)
# - gnet: 高性能事件驱动 TCP
# - quic: QUIC 协议 (UDP, 内置 TLS 1.3 加密+多路复用)
transport: "net"

# 加密方式: tls | chacha20 | none
# 注意: transport=quic 时此选项被忽略 (QUIC 自带加密)
crypto: "tls"

# TLS 配置 (crypto=tls 时使用)
tls:
  # 证书文件路径 (留空则启动时自动生成自签名证书)
  cert_file: ""
  key_file: ""
  # 如需使用已有证书或持久化证书，可指定路径:
  # cert_file: "./certs/server.crt"
  # key_file: "./certs/server.key"

# ChaCha20 配置 (crypto=chacha20 时使用)
chacha20:
  psk: "your-pre-shared-key-32bytes!!"

# QUIC 配置 (transport=quic 时使用)
quic:
  # 证书文件路径 (留空则启动时自动生成自签名证书)
  cert_file: ""
  key_file: ""
  # 如需持久化证书，可指定路径:
  # cert_file: "./certs/quic.crt"
  # key_file: "./certs/quic.key"

# 认证配置
auth:
  tokens:
    - "my-secret-token-1"
    - "my-secret-token-2"

# 多隧道复用配置 (可选, 实验性功能)
# 启用后会使用多条并行 TCP 连接进行数据传输,提高吞吐量和 CPU 利用率
# 注意: 不能与 transport=quic 同时使用 (QUIC 已内置多路复用)
mtmux:
  enabled: true      # 是否启用多隧道模式 (默认: false)
  tunnels: 8          # 并行连接数 (默认: 8, 范围: 1-32)
                      # 例如 bind_addr="0.0.0.0:7000" 且 tunnels=8 时
                      # 服务器会监听端口 7000-7007
                      # 请确保防火墙已开放这些端口
